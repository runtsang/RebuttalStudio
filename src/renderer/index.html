<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rebuttal Studio</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div>
        <h2 class="sidebar-title">Your Projects</h2>
        <div id="projectList" class="project-nav"></div>
      </div>
      <button id="settingsBtn" class="settings-btn" aria-label="Open settings">⚙</button>
    </aside>

    <main class="main">
      <header class="topbar">
        <div class="topbar-left">
          <button id="brandBtn" class="brand-btn" aria-label="Go to projects home">
            <img src="../../img/rebuttalstudio_hori.png" alt="Rebuttal Studio" class="brand-logo" />
          </button>
          <input id="projectSearch" class="search-input" placeholder="Search projects" aria-label="Search projects" />
        </div>
        <div class="topbar-right">
          <div class="view-toggle" role="group" aria-label="Layout mode">
            <button id="listViewBtn" class="btn icon-btn" aria-label="List view">☰</button>
            <button id="gridViewBtn" class="btn icon-btn" aria-label="Grid view">▦</button>
          </div>
          <button id="newBtn" class="btn">+ New</button>
          <button id="apiOpenBtn" class="btn">Enter API</button>
        </div>
      </header>

      <section class="content">
        <div id="namingPanel" class="panel hidden">
          <h3>Create New Project</h3>
          <div class="row stacked-on-mobile">
            <input id="projectNameInput" class="text-input" placeholder="Project name" />
          </div>
          <div class="conference-picker" role="radiogroup" aria-label="Conference">
            <button class="conference-chip selected" data-conference="ICLR" aria-checked="true" role="radio">ICLR</button>
            <button class="conference-chip" data-conference="NeurIPS" disabled title="Coming soon">NeurIPS</button>
            <button class="conference-chip" data-conference="ICML" disabled title="Coming soon">ICML</button>
            <button class="conference-chip" data-conference="ACL" disabled title="Coming soon">ACL</button>
            <button class="conference-chip" data-conference="EMNLP" disabled title="Coming soon">EMNLP</button>
          </div>
          <div class="row">
            <button id="cancelProjectBtn" class="btn">Cancel</button>
            <button id="confirmProjectBtn" class="btn primary">Create Project</button>
          </div>
          <p id="projectNameError" class="error"></p>
        </div>

        <div id="workspace" class="workspace-layout hidden">
          <section class="panel">
            <h3>Reviewer Input</h3>
            <textarea id="reviewerInput" class="reviewer-input" placeholder="Paste reviewer feedback here"></textarea>
          </section>

          <div class="arrow-column" aria-hidden="true">→</div>

          <section class="panel">
            <h3>Structured Breakdown</h3>
            <textarea id="breakdownOutput" class="reviewer-input" placeholder="API-assisted breakdown placeholder"></textarea>
          </section>
        </div>

        <div id="emptyState" class="panel empty-state">
          <h3>Create or open a project to begin.</h3>
        </div>
      </section>

      <div id="stageDock" class="stage-dock hidden" aria-label="Stage navigation">
        <div id="stageRow" class="stage-row"></div>
      </div>
    </main>
  </div>

  <div id="apiModal" class="modal-backdrop hidden">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="apiModalTitle">
      <h3 id="apiModalTitle">Enter API Key</h3>
      <input id="apiInput" type="password" class="text-input" placeholder="sk-..." />
      <div class="modal-actions">
        <button id="cancelApiBtn" class="btn">Cancel</button>
        <button id="saveApiBtn" class="btn primary">Save</button>
      </div>
    </div>
  </div>

  <div id="settingsModal" class="modal-backdrop hidden">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
      <h3 id="settingsTitle">Settings</h3>
      <label>Autosave interval (seconds)</label>
      <input id="autosaveInput" class="text-input" type="number" min="10" max="1800" />
      <p class="muted">Minimum 10 seconds, maximum 1800 seconds (30 minutes).</p>
      <p id="settingsError" class="error"></p>
      <div class="modal-actions">
        <button id="saveNowBtn" class="btn">Save now</button>
        <button id="closeSettingsBtn" class="btn primary">Apply</button>
      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
